@{
    ViewBag.Title = "Add Lead";
    Layout = "~/Views/Shared/_CRMLayout.cshtml";
}
@*<link href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css" rel="stylesheet" />*@
@*<link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" />*@
@*<link href="~/Content/bootstrap.min.css" rel="stylesheet" />*@
@*<link href="~/Content/font-awesome.min.css" rel="stylesheet" />*@
<link href="~/Content/bootstrap-datepicker.css" rel="stylesheet" />
@*<link href="~/Content/jquery-ui.css" rel="stylesheet" />*@
@*<link href="~/Content/jquery.datetimepicker.min.css" rel="stylesheet" />*@
<style>
    .Mandatory {
        color: red;
        font-weight: bold;
    } 
    fieldset.scheduler-border {
        border: 1px groove #ddd !important;
        padding: 0 1.4em 1.4em 1.4em !important;
        margin: 0 0 1.5em 0 !important;
        -webkit-box-shadow: 0px 0px 0px 0px #000;
        box-shadow: 0px 0px 0px 0px #000;
    } 
    legend {
        display: block;
        width: 37%;
        padding: 0;
        margin-bottom: 20px;
        font-size: 21px;
        line-height: inherit;
        color: #333;
        border: 0;
        border-bottom: 0px solid #e5e5e5;
    }
</style>

<div class="row top-head">
    <div class="col-md-12"><p><b><a style="color:#fff;" href="~/Dashboard/CRMDashboard">CRM</a> >> Add/Edit Lead </b></p></div>
</div>
<section>
    <form action="#" id="frmAddEditLeadSource" class="form-horizontal as" enctype="multipart/form-data" method="post" accept-charset="utf-8">
        <div class="row inner">
            <div id="tabs">
                <ul>
                    <li><a href="#tabs-1">Lead Details</a></li>
                    <li><a href="#tabs-2">Lead Follow Up Activity</a></li> 
                </ul>
                <div class="message">

                </div>

                <div id="tabs-1">
                    <div class="col-md-12 ftop">
                        <div class="form-group col-md-4">
                            <label for="txtLeadCode" class="col-sm-4 control-label">Lead Code</label>
                            <div class="col-sm-6">
                                <input class="form-control" id="txtLeadCode" name="txtLeadCode" tabindex="1" placeholder="Lead Code" type="text" maxlength="100" readonly />
                                <input id="hdnLeadId" type="hidden" value="@ViewData["leadId"]" />
                                <input id="hdnAccessMode" type="hidden" value="@ViewData["accessMode"]" />
                            </div>
                            <div class="col-sm-2">
                                <img src="~/Images/refresh.png" onclick="GenerateLeadCode()" style="width: 20px;float: left;margin-top:10px">
                            </div>
                        </div>
                        <div class="form-group col-md-4">
                            <label for="txtCompanyName" class="col-sm-4 control-label">Company Name&nbsp;<span class="Mandatory">(*)</span></label>
                            <div class="col-sm-8">
                                <input class="form-control" id="txtCompanyName" name="txtCompanyName" tabindex="2" placeholder="Enter Company Name" type="text" maxlength="100" />
                            </div>
                        </div>
                        <div class="form-group col-md-4">
                            <label for="txtContactPersoName" class="col-sm-4 control-label">Contact Person Name&nbsp;<span class="Mandatory">(*)</span></label>
                            <div class="col-sm-8">
                                <input class="form-control alpha-space-only" id="txtContactPersoName" name="txtContactPersoName" tabindex="3" placeholder="Enter Contact Person Name" type="text" maxlength="100" />
                            </div>
                        </div>

                    </div>

                    <div class="col-md-12">
                        <div class="form-group col-md-4">
                            <label for="txtEmail" class="col-sm-4 control-label">Email</label>
                            <div class="col-sm-8">
                                <input class="form-control" id="txtEmail" name="txtEmail" tabindex="4" placeholder="Enter Email" type="text" maxlength="100" />
                            </div>
                        </div>
                        <div class="form-group col-md-4">
                            <label for="txtAlternateEmail" class="col-sm-4 control-label">Alternate Email </label>
                            <div class="col-sm-8">
                                <input class="form-control" id="txtAlternateEmail" name="txtAlternateEmail" tabindex="5" placeholder="Enter Alternate Email" type="text" maxlength="100" />
                            </div>
                        </div>
                        <div class="form-group col-md-4">
                            <label for="txtContactNo" class="col-sm-4 control-label">Contact No.&nbsp;<span class="Mandatory">(*)</span></label>
                            <div class="col-sm-8">
                                <input class="form-control numeric-only" id="txtContactNo" name="txtContactNo" tabindex="6" placeholder="Enter Contact No" type="text" maxlength="100" />
                            </div>
                        </div>
                    </div>
                    <div class="col-md-12">

                        <div class="form-group col-md-4">
                            <label for="txtAlternateContactNo" class="col-sm-4 control-label">Alternate Contact No. </label>
                            <div class="col-sm-8">
                                <input class="form-control numeric-only" id="txtAlternateContactNo" name="txtAlternateContactNo" tabindex="7" placeholder="Enter Alternate Contact No" type="text" maxlength="100" />
                            </div>
                        </div>
                        <div class="form-group col-md-4">
                            <label for="txtDesignation" class="col-sm-4 control-label">Designation&nbsp;<span class="Mandatory">(*)</span></label>
                            <div class="col-sm-8">
                                <input class="form-control" id="txtDesignation" name="txtDesignation" tabindex="8" placeholder="Enter Designation" type="text" maxlength="100" />
                            </div>
                        </div>
                        <div class="form-group col-md-4">
                            <label for="txtFax" class="col-sm-4 control-label">Fax</label>
                            <div class="col-sm-8">
                                <input class="form-control numeric-only" id="txtFax" name="txtFax" tabindex="9" placeholder="Enter Fax" type="text" maxlength="100" />
                            </div>
                        </div>
                    </div>

                    <div class="col-md-12">
                        <div class="form-group col-md-4">
                            <label for="ddlCompanyBranch" class="col-sm-4 control-label">Company Branch&nbsp;<span class="Mandatory">(*)</span></label>
                            <div class="col-sm-8">
                                <select id="ddlCompanyBranch" name="ddlCompanyBranch" tabindex="46" onchange="GetBranchStateId()" class="form-control"></select>
                                <input id="hdnBillingStateId" type="hidden" value="0" />
                                <input id="hdnSessionCompanyBranchId" type="hidden" value="@ViewData["CompanyBranchId"]" />
                                <input id="hdnSessionUserID" type="hidden" value="@ViewData["UserId"]" />
                            </div>
                        </div>
                    </div>

                        <div class="col-md-12 billing-details" id="accordion">
                            <h4 data-toggle="collapse" data-parent="#accordion" href="#collapse1" class="panel-title expand" style="background:rgba(0, 0, 0, 0) linear-gradient(#375CB0, #6e96e2) repeat scroll 0 0; padding:10px;">
                                <div class="right-arrow pull-right" style="font-weight:bold; color:#fff;">+</div>
                                <a href="#" style="font-weight:bold; color:#fff;">Billing Details</a>
                            </h4>

                            <div id="collapse1" class="panel-collapse collapse">
                                <div class="col-md-12 ftop">
                                    <div class="col-md-6">
                                        <fieldset class="scheduler-border">
                                            <legend class="scheduler-border">Company Address</legend>
                                            <div class="form-group">
                                                <label for="txtAddress" class="col-sm-4 control-label">Address&nbsp;<span class="Mandatory">(*)</span></label>
                                                <div class="col-sm-8">
                                                    <input class="form-control" id="txtAddress" name="txtAddress" tabindex="10" placeholder="Enter Company Address" type="text" maxlength="100" />
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <label for="txtCompanyCity" class="col-sm-4 control-label">Company City&nbsp;<span class="Mandatory">(*)</span></label>
                                                <div class="col-sm-8">
                                                    <input class="form-control" id="txtCompanyCity" name="txtCompanyCity" tabindex="11" placeholder="Enter Company City" type="text" maxlength="100" />
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label for="ddlCountry" class="col-sm-4 control-label">Company Country&nbsp;<span class="Mandatory">(*)</span></label>
                                                <div class="col-sm-8">
                                                    <select id="ddlCountry" name="ddlCountry" tabindex="12" onchange="BindStateList(0)" class="form-control" style="width: 100%;height: 31px;"></select>
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <label for="ddlState" class="col-sm-4 control-label">Company State&nbsp;<span class="Mandatory">(*)</span> </label>
                                                <div class="col-sm-8">
                                                    <select id="ddlState" name="ddlState" tabindex="13" class="form-control" style="width: 100%;height: 31px;"></select>
                                                </div>
                                            </div>

                                            <div class="form-group" style="margin-bottom: 48px;">
                                                <label for="txtCompanyPinCode" class="col-sm-4 control-label">Company Pin Code/Zip Code</label>
                                                <div class="col-sm-8">
                                                    <input class="form-control numeric-only" id="txtCompanyPinCode" name="txtCompanyPinCode" tabindex="14" placeholder="Enter Pin Code" type="text" maxlength="100" />
                                                </div>
                                            </div>
                                        </fieldset>
                                    </div>
                                    <div class="col-md-6">
                                        <fieldset class="scheduler-border">
                                            <legend class="scheduler-border"> Branch Address</legend>
                                            <div class="form-group">
                                                <label for="txtSameCompanyAddress" class="control-label">Same as Company Address</label>
                                                <input id="txtSameCompanyAddress" name="txtSameCompanyAddress" onclick="GenerateSameAddress()" type="checkbox" tabindex="15" />
                                            </div>
                                            <div class="form-group">
                                                <label for="txtBranchAddress" class="col-sm-4 control-label">Address</label>
                                                <div class="col-sm-8">
                                                    <input class="form-control" id="txtBranchAddress" name="txtBranchAddress" tabindex="16" placeholder="Enter Branch Address" type="text" maxlength="100" />
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label for="txtCity" class="col-sm-4 control-label">City </label>
                                                <div class="col-sm-8">
                                                    <input class="form-control" id="txtCity" name="txtCity" tabindex="17" placeholder="Enter City" type="text" maxlength="100" />
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <label for="ddlBranchCountry" class="col-sm-4 control-label">Country </label>
                                                <div class="col-sm-8">
                                                    <select id="ddlBranchCountry" name="ddlBranchCountry" tabindex="18" onchange="BindBranchStateList(0)" class="form-control" style="width: 100%;height: 31px;"></select>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label for="ddlBranchState" class="col-sm-4 control-label">State</label>
                                                <div class="col-sm-8">
                                                    <select id="ddlBranchState" name="ddlBranchState" tabindex="19" class="form-control" style="width: 100%;height: 31px;"></select>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label for="txtPinCode" class="col-sm-4 control-label">Pin Code/Zip Code</label>
                                                <div class="col-sm-8">
                                                    <input class="form-control numeric-only" id="txtPinCode" name="txtPinCode" tabindex="20" placeholder="Enter Pin Code" type="text" maxlength="100" />
                                                </div>
                                            </div>
                                        </fieldset><br />
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-12 ftop">
                            <div class="form-group col-md-4">
                                <label for="ddlLeadType" class="col-sm-4 control-label">Lead Type&nbsp;<span class="Mandatory">(*)</span> </label>
                                <div class="col-sm-8">
                                    <select id="ddlLeadType" name="ddlLeadType" tabindex="21" class="form-control" style="width: 100%;height: 31px;"></select>
                                </div>
                            </div>
                            <div class="form-group col-md-4">
                                <label for="ddlLeadSource" class="col-sm-4 control-label">Lead Source&nbsp;<span class="Mandatory">(*)</span> </label>
                                <div class="col-sm-8">
                                    <select id="ddlLeadSource" name="ddlLeadSource" tabindex="21" class="form-control" style="width: 100%;height: 31px;"></select>
                                </div>
                            </div>
                            <div class="form-group col-md-4">
                                <label for="txtOtherLeadSourceDescription" class="col-sm-4 control-label">Other Lead Source Description</label>
                                <div class="col-sm-8">
                                    <input class="form-control" id="txtOtherLeadSourceDescription" name="txtOtherLeadSourceDescription" tabindex="22" placeholder="Enter Other Lead Source Description" type="text" maxlength="100" />
                                </div>
                            </div>
                        </div>

                        <div class="col-md-12">
                            <div class="form-group col-md-4">
                                <label for="chkstatus" class="col-sm-4 control-label">Active Status&nbsp;<span class="Mandatory">(*)</span></label>
                                <div class="col-sm-8">
                                    <input id="chkstatus" name="chkstatus" type="checkbox" checked="checked" tabindex="23" />
                                </div>
                            </div>
                        </div>

                    </div>
                        <div id="tabs-2">
                            <div class="col-md-12 ftop nofollowup">
                                <div class="form-group col-md-4">
                                    <label for="ddlActivityType" class="col-sm-4 control-label">Follow Up Activity Type&nbsp;<span class="Mandatory">(*)</span></label>
                                    <div class="col-sm-8">
                                        <select id="ddlActivityType" name="ddlActivityType" class="form-control" tabindex="1" style="width: 100%;height: 31px;"></select>
                                        <input id="hdnLeadFollowUpId" type="hidden" value="0" />
                                        @*<input type="hidden" id="hdnLeadId" value= "@ViewData["leadId"]" />*@
                                        <input id="hdnFollowUpByUserName" type="hidden" value="@ViewData["FollowUpByUserName"]" />
                                        <input id="hdnCreatedDate" type="hidden" value="@ViewData["CreatedDate"]" />
                                        <input id="hdnModifyDate" type="hidden" value="@ViewData["ModifyDate"]" />
                                        <input id="hdnSequenceNo" type="hidden" value="0" />
                                    </div>
                                </div>
                                <div class="form-group col-md-4">
                                    <label for="ddlLeadStatus" class="col-sm-4 control-label">Lead Status&nbsp;<span class="Mandatory">(*)</span> </label>
                                    <div class="col-sm-8">
                                        <select id="ddlLeadStatus" name="ddlLeadStatus" onchange="EnableDisableFollowupActivityControls()" tabindex="2" class="form-control" style="width: 100%;height: 31px;"></select>
                                    </div>
                                </div>
                                <div class="form-group col-md-4">
                                    <label for="txtdueDate" class="col-sm-4 control-label">Due Date/Time &nbsp;<span class="Mandatory">(*)</span></label>
                                    <div class="col-sm-8">
                                        <input class="form-control" id="txtdueDate" name="txtdueDate" tabindex="3" placeholder="dd-MMM-yyyy hh:mm am/pm" type="text" maxlength="100" />
                                    </div>
                                </div>

                            </div>
                            <div class="col-md-12 nofollowup">
                                <div class="form-group col-md-4">
                                    <label for="txtReminderDate" class="col-sm-4 control-label">Reminder Date/Time&nbsp;<span class="Mandatory">(*)</span></label>
                                    <div class="col-sm-8">

                                        <input class="form-control" id="txtReminderDate" tabindex="4" name="txtReminderDate" placeholder="dd-MMM-yyyy hh:mm am/pm">

                                    </div>
                                </div>
                                <div class="form-group col-md-4">
                                    <label for="ddlPriority" class="col-sm-4 control-label">Priority &nbsp;<span class="Mandatory">(*)</span></label>
                                    <div class="col-sm-8">
                                        <select class="form-control" id="ddlPriority" name="ddlPriority" tabindex="5">
                                            <option value="0">--Select Priority--</option>
                                            <option value="1">Urgent</option>
                                            <option value="2">High</option>
                                            <option value="3">Medium</option>
                                            <option value="4">Low</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group col-md-4">
                                    <label for="txtAssignlead" class="col-sm-4 control-label">Assign Lead &nbsp;<span class="Mandatory">(*)</span> </label>
                                    <div class="col-sm-8">
                                        <input class="form-control" id="txtAssignlead" name="txtAssignlead" tabindex="6" placeholder="Select Employee Name ">
                                        <input type="hidden" id="hdnUserId" name="hdnUserId" />
                                        <input type="hidden" id="hdnLoginUserId" name="hdnLoginUserId" value="@ViewData["UserId"]" />
                                    </div>
                                </div>

                            </div>
                            <div class="col-md-12 ">

                                <div class="form-group col-md-4">
                                    <label for="txtLeadStatusReason" class="col-sm-4 control-label">Lead Status Reason&nbsp;<span class="Mandatory">(*)</span></label>
                                    <div class="col-sm-8">
                                        <input class="form-control" id="txtLeadStatusReason" name="txtLeadStatusReason" tabindex="7" placeholder="Enter Lead Status Reason" type="text" />
                                    </div>
                                </div>
                                <div class="form-group col-md-4">
                                    <label for="txtRemarks" class="col-sm-4 control-label">Remarks&nbsp;<span class="Mandatory">(*)</span></label>
                                    <div class="col-sm-8">
                                        <textarea class="form-control" id="txtRemarks" name="txtRemarks" tabindex="8" placeholder="Enter Follow Up Remarks" cols="2"></textarea>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-12 col-lg-12 col-md-12 ftop">
                                <div class="col-md-3"></div>
                                <div class="col-md-6">
                                    <center>

                                        <input class="btn btn-success" value="Add Follow Up" alt="Add Follow Up" tabindex="9" id="btnAddFollowUp" onclick="AddLeadFollowUp(1)" type="button" border="0">
                                        <input class="btn btn-success" value="Update Follow Up" style="display:none;" tabindex="9" alt="Update FollowUp" id="btnUpdateFollowUp" onclick="AddLeadFollowUp(2)" type="button" border="0">
                                        <input class="btn btn-success" type="button" id="btnClearFollowUp" tabindex="10" onclick="ClearFollowUpFields()" value="Reset" />
                                    </center>
                                </div>
                                <div class="col-md-3"></div>
                            </div>
                            <div class="col-sm-12 col-lg-12 col-md-12">

                                <div id="divLeadList">

                                </div>

                            </div>

                        </div>
                        <div class="row col-sm-12 col-lg-12 col-md-12 ftop">
                            <div class="col-md-3"></div>
                            <div class="col-md-6">
                                <center>
                                    <input class="btn btn-success" value="Save" alt="Save" id="btnSave" tabindex="24" onclick="SaveData(1)" type="button" border="0">
                                    <input class="btn btn-success" value="Update" style="display:none;" tabindex="24" alt="Update" id="btnUpdate" onclick="SaveData(2)" type="button" border="0">
                                    <a class="btn btn-success" style="color:#fff" id="btnList" tabindex="27" href="@Url.Content("~/Lead/AddEditLead")">Reset</a>
                                    @*<input class="btn btn-success" type="button" id="btnReset" tabindex="25" onclick="ClearFields()" value="Reset" /> &nbsp;&nbsp;*@
                                    <a class="btn btn-success" style="color:#fff" id="btnList" tabindex="28" href="@Url.Content("~/Lead/ListLead")">Search Lead</a>
                                </center>
                            </div>
                            <div class="col-md-3"></div>
                        </div>
                    </div>
                </div>


        <!-- Modal -->
        <div class="modal fade" id="alertModel" tabindex="25" role="dialog">
            <div class="modal-dialog  modal-sm">
                <!-- Modal content-->
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" tabindex="26" data-dismiss="modal">&times;</button>
                        <h4 class="modal-title" id="modelHeader"></h4>
                    </div>
                    <div class="modal-body">
                        <p id="modelText"></p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary  btn-block" tabindex="26" data-dismiss="modal">Close</button>
                    </div>
                </div>

            </div>
        </div>
    </form>
</section>
<script src="~/Scripts/jquery-ui.js"></script>
<script src="~/Scripts/moment.js"></script>
<script src="~/Scripts/bootstrap-datetimepicker.js"></script>
@*<script src="~/Scripts/jquery.datetimepicker.full.js"></script>*@
@*<script src="~/Scripts/jquery.datetimepicker.full.min.js"></script>*@
@*<script src="~/Scripts/jquery.datetimepicker.min.js"></script>*@
<script src="~/Scripts/Lead/AddLead.js"></script>


